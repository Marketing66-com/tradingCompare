

{% extends 'base.html.twig' %}

 {% block description %}
     <title>{{symbol | split('.')[0]}} {{ 'title.chart_stock1'|trans }} - {{ name}} {{ 'title.chart_stock2'|trans }} - Trading Compare</title>
     <meta name="description" content="{{ name}} ({{symbol| split('.')[0]}}), {{ 'description.chart_stock1'|trans }} {{ symbol| split('.')[0]}} {{ 'description.chart_stock2'|trans }}">
 {% endblock %}
{##}
{% block body %}
    {#<link rel="stylesheet" href="https://www.interactivecrypto.com/chart_iq_web/css/perfect-scrollbar.css" />#}
    {#<link rel="stylesheet" type="text/css" href="https://www.interactivecrypto.com/chart_iq_web/css/normalize.css" media="screen" />#}
    {#<link rel="stylesheet" type="text/css" href="https://www.interactivecrypto.com/chart_iq_web/css/page-defaults.css" media="screen" />#}
    {#<link rel="stylesheet" type="text/css" href="https://www.interactivecrypto.com/chart_iq_web/css/stx-chart.css" media="screen" />#}
    {#<link rel="stylesheet" type="text/css" href="https://www.interactivecrypto.com/chart_iq_web/css/chartiq.css" media="screen" />#}
    {#<link rel="stylesheet" href="https://www.interactivecrypto.com/chart_iq_web/css/perfect-scrollbar.css" />#}
    <link rel="stylesheet" href='{{ asset("css/charts.css") }}' />
    {#<link rel="stylesheet" href='{{ asset("css/chart-live-iq.css") }}' />#}


    {{ include('default/searchbar_chart.html.twig') }}
    <div id="dvChart_stock" class="my-container  ng-cloak" ng-controller="Chart_stockController" ng-init="init('{{ symbol }}')">
        <div id="hello" ng-controller="Chart_stockController ">
            <div ng-if="spinner" id="spinnerChart" >
                <img id="img-spinner" src="{{ asset('img/ajax-loader5.gif') }}" alt="loading">
            </div>
            <section class="table">
                <div class="container padding_non">
                    <div class="row ">

                        <div class="col-md-8 col-sm-12 col-xs-12 " style="padding-right: 0px;padding-left: 0px;">
                            <div class="chart_bitcoin-cont ">
                                <div class="bitcoin_text-cont">
                                    <div class="bitcoin_img-cont">
                                        <img class="bitcoin_img" ng-src="{[{mystock.img}]}" onerror="this.src='/img/Stock_Logos/stocks.png'";>
                                    </div>
                                    <div class="bitcoin_text-cont_left ">
                                        <h3 class="bitcoin_title text_size">{[{mystock.name}]}<span class="bitcoin_title_right">{[{mystock.pair.replace("_","/")}]}</span>
                                            <span ng-if="userLoggedIn && mystock.is_in_watchlist" ng-click="delete_from_watchlist()" style="cursor: pointer" class="bitcoin_title_right-start"><i class="fas fa-star"></i></span>
                                            <span ng-if="userLoggedIn && !mystock.is_in_watchlist" ng-click="add_to_watchlist()" style="color: #999999; cursor: pointer" class="bitcoin_title_right-start"><i class="far fa-star"></i></span>
                                            <span ng-if="!userLoggedIn" ng-click="click_on_star()" class="bitcoin_title_right-start" style="color: #999999;cursor: pointer"><i class="far fa-star"></i></span>
                                        </h3>
                                        <h3 class="bitcoin_many_stock text_size" ng-class="{'negative': mystock.variation == 'down', 'positive':mystock.variation == 'up', 'neutral': mystock.variation == 'none'}">{[{mystock.price}]}
                                            <span class="statistics_block-text" ng-class="{'negative': mystock.change_pct < 0, 'positive': mystock.change_pct >= 0}">{[{mystock.change_pct}]}%
                                                <span class="statistics_block_min-text">{[{mystock.point}]}</span>
                                                <span class="bitcoin_green-text_icon"><i class="fas fa-share"></i></span>
                                            </span>
                                        </h3>
                                    </div>
                                    <div class="bitcoin_text-cont_right">
                                        <a class="btcoin_btn btn1" href="http://borthy-carges.com/98dd47bc-5797-47bf-847a-784a2445ee36" target="_blank">{{ 'button.trade_now'|trans }}</a>
                                    </div>
                                </div>
                            </div>

                            <div class="chart_content-text chart_content-text1 box_height_stock2">
                                <div class="bitcoin_text-cont_left">
                                    <p class="bitcoin_bottom-text text-price column">

                                        {{ 'high'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.day_high}]} {[{mystock.devise}]}</span>
                                        <br> {{ 'low'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.day_low}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'open'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.price_open}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'close'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.close_yesterday}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'hight_year'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock["52_week_high"]}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'low_year'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock["52_week_low"]}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'change_day'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.day_change}]} %</span>
                                        <br>  {{ 'market_cap'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.market_cap}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'volume'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.volume}]} {[{mystock.devise}]}</span>
                                        <br>  {{ 'shares'|trans }} : <span class="bitcoin_bottom-text_bold">{[{mystock.shares}]} {[{mystock.devise}]}</span>

                                    </p>

                                </div>
                            </div>
                        </div>
                        <div id="country" country="{[{mystock.country}]}"></div>
                        <div class="col-md-4 col-sm-6 col-xs-12 col-sm1 ">
                            <div class="chart_bitcoin-reting chart_bitcoin-reting1 box_height_stock1" style="    padding-bottom: 0px;    padding-top: 20px;">
                                <div class="col-md-6 col-sm-6 col-xs-6 ">
                                    <a ng-if="!userLoggedIn" ng-click="click_on_star()" class="btcoin_btn sentiments_btn_green" target="_blank"> {{ 'button.bullish'|trans }}</a>
                                    <a ng-if="userLoggedIn && mystock.status_sentiment == 'CLOSE' " ng-click="add_sentiment('BULLISH', total_sentiments)"  class="btcoin_btn sentiments_btn_green" target="_blank"> {{ 'button.bullish'|trans }}</a>
                                    <a ng-if="userLoggedIn && mystock.status_sentiment == 'OPEN' && mystock.type_sentiment != 'BULLISH'" ng-click="AlreadyOpen()" class="btcoin_btn sentiments_btn_green" target="_blank"> {{ 'button.bullish'|trans }}</a>
                                    <a ng-if="userLoggedIn && mystock.status_sentiment == 'OPEN' && mystock.type_sentiment == 'BULLISH'" ng-click="AlreadyOpen()" class="btcoin_btn sentiments_btn_green_selected" target="_blank"> {{ 'button.bullish'|trans }}</a>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-6 ">
                                    <a ng-if="!userLoggedIn" ng-click="click_on_star()"  class="btcoin_btn sentiments_btn_red" target="_blank"> {{ 'button.bearish'|trans }}</a>
                                    <a ng-if="userLoggedIn && mystock.status_sentiment == 'CLOSE'" ng-click="add_sentiment('BEARISH',total_sentiments)"  class="btcoin_btn sentiments_btn_red" target="_blank"> {{ 'button.bearish'|trans }}</a>
                                    <a ng-if="userLoggedIn && mystock.status_sentiment == 'OPEN' && mystock.type_sentiment != 'BEARISH' " ng-click="AlreadyOpen()" class="btcoin_btn sentiments_btn_red" target="_blank"> {{ 'button.bearish'|trans }}</a>
                                    <a ng-if="userLoggedIn && mystock.status_sentiment == 'OPEN' && mystock.type_sentiment == 'BEARISH' " ng-click="AlreadyOpen()" class="btcoin_btn sentiments_btn_red_selected" target="_blank"> {{ 'button.bearish'|trans }}</a>
                                </div>
                                <p ng-if="mystock.more_bullish"
                                        {#class="chart_bitcoin-reting_prozent"#}
                                > {{ 'sentiment'|trans }}: {[{mystock.sentiment }]}%  Bullish</p>
                                <p ng-if="!mystock.more_bullish"
                                        {#class="chart_bitcoin-reting_prozent"#}
                                > {{ 'sentiment'|trans }}: {[{mystock.sentiment }]}%  Bearish</p>
                                <div class="chart_bitcoin-reting_progress-bar">
                                    {#<div ng-if="mystock.sentiment < '50'" class="reting_progress-bar_click reting_progress-bar_click_red"></div>#}
                                    {#<div ng-if="mystock.sentiment >= '50'" class="reting_progress-bar_click"></div>#}
                                    <div ng-if="mystock.more_bullish && mystock.more_bullish!=undefined" class="reting_progress-bar_click_base reting_progress-bar_click_green"></div>
                                    <div ng-if="!mystock.more_bullish && mystock.more_bullish!=undefined" class="reting_progress-bar_click_base reting_progress-bar_click_red"></div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 col-sm-6 col-xs-12 col-sm2">
                            <div class="chart_content-text chart_bitcoin-reting box_height_stock2" >
                                <p class="chart_content-text_info">
                                    {[{mystock.name}]} - {{ symbol| split('.')[0]}}<br><br>
                                    {[{description}]}
                                <div>{[{ stock_sentiments.BEARISH }]}</div>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

            </section>
        </div>

    <div class="my-container">
        <div>
            <section class="table">
                        <div class="container padding_non">

                            <div class="my-container"style="background: white; padding-top: 5px;" >
                                <div class="container">
                                    <div class="row" style="font-size: x-large;padding-left: 2%; font-weight: bold;" >
                                        Chart:
                                    </div>
                                </div>
                            </div>
                            <div style="padding-bottom: 5px;padding-left: 2%;background:white "> Period :
                                <input type="radio" name="periods" id="DD" value="day" ng-click="changeDataSet('DD');" checked="checked"> 1 DAY
                                <input type="radio" name="periods" id="hh" value="hour" ng-click="changeDataSet('hh');"> 1 hour

                            </div>
                            {% include 'default/Charts/newChart.html.twig' %}

                        </div>
            </section>
        </div>
    </div>
    </div>
    {#</div>#}
    {% include 'default/social_tab.html.twig' %}
{% endblock %}


{% block javascripts %}
    <script src="{{ asset('js/Charts/Chart_stock.js') }}"></script>
    {#<script src="https://tradingcompare.com/ChartIQ/js/chartiq.js"></script>#}

    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/translations.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/componentUI.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/components.js"></script>#}
    {#<script src="http://tradingcompare.com/ChartIQ/js/components.js"></script>#}
    {#<script src="http://tradingcompare.com/ChartIQ/js/translations.js"></script>#}
    {#<script src="http://tradingcompare.com/ChartIQ/js/componentUI.js"></script>#}

    {#<script src="https://tradingcompare.com/ChartIQ/js/quoteFeedSimulator.js"></script>#}
    {#<script src="https://tradingcompare.com/ChartIQ/js/thirdparty/iscroll.js"></script>#}
    {#<script src="https://tradingcompare.com/ChartIQ/js/plugin.js"></script>#}
    {#<script src="https://tradingcompare.com/ChartIQ/js/addOns.js"></script>#}
    {#<script src="https://tradingcompare.com/ChartIQ/js/thirdparty/object-observe.js"></script>#}
    {#<script src="https://tradingcompare.com/ChartIQ/js/thirdparty/webcomponents-lite.min.js"></script>#}
    {#<script src='https://tradingcompare.com/ChartIQ/js/thirdparty/perfect-scrollbar.jquery.js'></script>#}
    {#<script src="https://tradingcompare.com/ChartIQ/js/thirdparty/html2canvas.js"></script>#}
    <!-- <script src="plugins/tradingcentral/components.js"></script> -->


    <!--<script src="js/thirdparty/splines.js"></script>-->
    {#<script src=" https://www.interactivecrypto.com/chart_iq_web/js/quoteFeedSimulator.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/thirdparty/iscroll.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/plugin.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/addOns.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/thirdparty/object-observe.js"></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/thirdparty/webcomponents-lite.min.js"></script>#}
    {#<script src='https://www.interactivecrypto.com/chart_iq_web/js/thirdparty/perfect-scrollbar.jquery.js'></script>#}
    {#<script src="https://www.interactivecrypto.com/chart_iq_web/js/thirdparty/html2canvas.js"></script>#}

    <script>
        function loadCSS(hf) {
            var ms = document.createElement("link");
            ms.rel = "stylesheet";
            ms.href = hf;
            document.getElementsByTagName("head")[0].appendChild(ms);
        }
        loadCSS('{{asset("css/footer.css")}}');
        loadCSS('{{ asset("font/font_avenir.css")}}');
        loadCSS('{{ asset("css/charts.css")}}');
        loadCSS("https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i");
        loadCSS("https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css");

        //User Styles: Main
        //User Styles: Media
    </script>

    <!-- Load CSS compiled without Bootstrap & Header styles (after release) -->
    <script>var ms = document.createElement("link");
        ms.rel = "stylesheet";
        ms.href = '{{ asset("css/compiled.min.css")}}';
        document.getElementsByTagName("head")[0].appendChild(ms);
    </script>

    <!-- Load Scripts -->
    <script>var scr = {
            "scripts": [
                {"src": '{{ asset("js/jquery-3.3.1.min.js")}}', "async": false},
                {"src": '{{ asset("js/general.js")}}', "async": false},
                {"src": "https://use.fontawesome.com/releases/v5.0.10/js/all.js", "async": false},

            ]
        };
        !function (t, n, r) {
            "use strict";
            var c = function (t) {
                if ("[object Array]" !== Object.prototype.toString.call(t)) return !1;
                for (var r = 0; r < t.length; r++) {
                    var c = n.createElement("script"), e = t[r];
                    c.src = e.src, c.async = e.async, n.body.appendChild(c)
                }
                return !0
            };
            t.addEventListener ? t.addEventListener("load", function () {
                c(r.scripts);
            }, !1) : t.attachEvent ? t.attachEvent("onload", function () {
                c(r.scripts)
            }) : t.onload = function () {
                c(r.scripts)
            }
        }(window, document, scr);
    </script>
    {#<script>#}
        {#(function($) {#}
            {#function checkWidth() {#}
                {#if ($(window).width() > 700) {#}
                    {#$('body').removeClass('break-md break-sm').addClass('break-lg');#}
                    {#$('.icon-toggles').removeClass('sidenav active').addClass('ciq-toggles');#}
                    {#stxx.layout.sidenav = 'sidenavOff';#}
                    {#$('#symbol').attr("placeholder", "Enter Symbol");#}
                    {#return;#}
                {#}#}
                {#if ($(window).width() <= 700 && $(window).width() > 584) {#}
                    {#$('body').removeClass('break-lg break-sm').addClass('break-md');#}
                    {#$('.icon-toggles').removeClass('sidenav active').addClass('ciq-toggles');#}
                    {#stxx.layout.sidenav = 'sidenavOff';#}
                    {#$('#symbol').attr("placeholder", "Symbol");#}
                    {#return;#}
                {#}#}
                {#if ($(window).width() <= 584) {#}
                    {#$('body').removeClass('break-md break-lg').addClass('break-sm');#}
                    {#$('.icon-toggles').removeClass('ciq-toggles').addClass('sidenav');#}
                    {#$('#symbol').attr("placeholder", "");#}
                {#}#}
            {#}#}

            {#function setHeight() {#}
                {#var windowHeight=$(window).height();#}
                {#var ciqHeight = $('.ciq-chart').height();#}

                {#if ($('body').hasClass("toolbar-on")) {#}
                    {#$('#chartContainer').height(ciqHeight - 45);#}
                {#} else {#}
                    {#$('#chartContainer').height(ciqHeight);#}
                {#}#}
                {#// This little snippet will ensure that dialog boxes are never larger than the screen height#}
                {#$('#maxHeightCSS').remove();#}
                {#$('head').append('<style id="maxHeightCSS">cq-dialog { max-height: ' +  windowHeight + 'px }</style>');#}
            {#}#}

            {#$(".stx-markers cq-item.circle").stxtap(function(){#}
                {#$(".stx-markers .ciq-radio").removeClass("ciq-active");#}
                {#$(".stx-markers cq-item.circle .ciq-radio").addClass("ciq-active");#}
                {#showMarkers("circle");#}
            {#});#}
            {#$(".stx-markers cq-item.square").stxtap(function(){#}
                {#$(".stx-markers .ciq-radio").removeClass("ciq-active");#}
                {#$(".stx-markers cq-item.square .ciq-radio").addClass("ciq-active");#}
                {#showMarkers("square");#}
            {#});#}
            {#$(".stx-markers cq-item.callout").stxtap(function(){#}
                {#$(".stx-markers .ciq-radio").removeClass("ciq-active");#}
                {#$(".stx-markers cq-item.callout .ciq-radio").addClass("ciq-active");#}
                {#showMarkers("callout");#}
            {#});#}
            {#$(".stx-markers cq-item.abstract").stxtap(function(){#}
                {#$(".stx-markers .ciq-radio").removeClass("ciq-active");#}
                {#$(".stx-markers cq-item.abstract .ciq-radio").addClass("ciq-active");#}
                {#hideMarkers();#}
                {#var helicopter=$(".stx-marker.abstract").clone();#}
                {#helicopter.css({"z-index":"30","left":(0.4*stxx.chart.width).toString()+"px"});#}
                {#var marker=new CIQ.Marker({#}
                    {#stx: stxx,#}
                    {#xPositioner:"none",#}
                    {#yPositioner:"above_candle",#}
                    {#label: "helicopter",#}
                    {#permanent: true,#}
                    {#chartContainer: true,#}
                    {#node: helicopter[0]#}
                {#});#}
                {#stxx.draw(); // call draw() when you're done adding markers. They will be positioned in batch.#}
            {#});#}

            {#$(".stx-markers cq-item.none").stxtap(function(){#}
                {#$(".stx-markers .ciq-radio").removeClass("ciq-active");#}
                {#$(".stx-markers cq-item.none .ciq-radio").addClass("ciq-active");#}
                {#hideMarkers();#}
            {#});#}

            {#function httpGet(theUrl) {#}
                {#var xmlHttp = new XMLHttpRequest();#}
                {#xmlHttp.open("GET", theUrl, false); // false for synchronous request#}
                {#xmlHttp.send(null);#}
                {#// console.log("1adress", theUrl);#}
                {#return xmlHttp.responseText;#}
            {#}#}

            {#//var socket = io.connect('https://streamer.cryptocompare.com/');#}
            {#var stxx=new CIQ.ChartEngine({container:$("#chartContainer")[0],layout:{"interval":60} ,preferences:{labels:false, currentPriceLine:true, whitespace:50}});#}
            {#stxx.layout.crosshair=true;#}
            {#// Attach an automated quote feed to the chart to handle initial load, pagination and updates at preset intervals.#}
            {#stxx.attachQuoteFeed(quotefeedSimulator,{refreshInterval:1,bufferSize:200});#}

            {#var socketStock = io.connect("https://ws-api.iextrading.com/1.0/last");#}
            {#socketStock.emit("subscribe", '{{ symbol }}');#}
            {#socketStock.on("message", (data) => {#}
                {#var data = JSON.parse(data);#}
                {#//console.log("data", data)#}

                {#var dateObj = new Date()#}
                {#var year = dateObj.getUTCFullYear();#}
                {#var month = ('0' + (dateObj.getUTCMonth() + 1)).slice(-2);#}
                {#var day = ('0' + dateObj.getUTCDate()).slice(-2);#}
                {#var shortDate = year + '-' + month + '-' + day;#}
                {#var Hours = ('0' + dateObj.getUTCHours()).slice(-2);#}
                {#// var Minutes = ('0' + dateObj.getUTCMinutes()).slice(-2);#}
                {#var shortTime = Hours + ':00:0';#}
                {#var my_Final_Date = shortDate + ' ' + shortTime;#}

                {#//console.log("my_date",my_Final_Date)#}
                {#stxx.updateChartData([{"Date":my_Final_Date, "Close":Number((data.price).toFixed(2))}]);#}
            {#})#}
            {#// Optionally set a market factory to the chart to make it market hours aware. Otherwise it will operate in 24x7 mode.#}
            {#// This is required for the simulator, or if you intend to also enable Extended hours trading zones.#}
            {#//stxx.setMarketFactory(CIQ.Market.Symbology.factory);#}
            {#// Extended hours trading zones -- Make sure this is instantiated before calling startUI as a timing issue with may occur#}
            {#new CIQ.ExtendedHours({stx:stxx, filter:true});#}

            {#// Floating tooltip on mousehover#}
            {#// comment in the following line if you want a tooltip to display when the crosshair toggle is turned on#}
            {#// This should be used as an *alternative* to the HeadsUP (HUD).#}
            {#new CIQ.Tooltip({stx:stxx, ohl:true, volume:true, series:true, studies:true});#}

            {#// Inactivity timer#}
            {#new CIQ.InactivityTimer({stx:stxx, minutes:30});#}
            {#// Animation (using tension requires splines.js)#}
            {#//new CIQ.Animation(stxx, {tension:0.3});#}
            {#//TODO, encapsulate these in a helper object#}
            {#function restoreLayout(stx, cb){#}
                {#// var datum=CIQ.localStorage.getItem("myChartLayout");#}
                {#// if(datum===null) return;#}
                {#// function closure(){#}
                {#// 	restoreDrawings(stx, stx.chart.symbol);#}
                {#// 	if(cb) cb();#}
                {#// }#}
                {#// stx.importLayout(JSON.parse(datum), {managePeriodicity:true, cb: closure});#}
            {#}#}

            {#function saveLayout(obj){#}
                {#// var s=JSON.stringify(obj.stx.exportLayout(true));#}
                {#// CIQ.localStorageSetItem("myChartLayout", s);#}
            {#}#}

            {#function restoreDrawings(stx, symbol){#}
                {#var memory=CIQ.localStorage.getItem(symbol);#}
                {#if(memory!==null){#}
                    {#var parsed=JSON.parse(memory);#}
                    {#if(parsed){#}
                        {#stx.importDrawings(parsed);#}
                        {#stx.draw();#}
                    {#}#}
                {#}#}
            {#}#}

            {#function saveDrawings(obj){#}
                {#var tmp=obj.stx.exportDrawings();#}
                {#if(tmp.length===0){#}
                    {#CIQ.localStorage.removeItem(obj.symbol);#}
                {#}else{#}
                    {#CIQ.localStorageSetItem(obj.symbol, JSON.stringify(tmp));#}
                {#}#}
            {#}#}

            {#function restorePreferences(){#}
                {#var pref=CIQ.localStorage.getItem("myChartPreferences");#}
                {#if (pref) stxx.importPreferences(JSON.parse(pref));#}
            {#}#}

            {#function savePreferences(obj){#}
                {#CIQ.localStorageSetItem("myChartPreferences",JSON.stringify(stxx.exportPreferences()));#}
            {#}#}

            {#function retoggleEvents(obj){#}
                {#var active=$(".stx-markers .ciq-radio.ciq-active");#}
                {#active.parent().triggerHandler("stxtap");#}
            {#}#}

            {#//****************comment out if do not want to remember data#}
            {#// stxx.callbacks.layout=saveLayout;#}
            {#// stxx.callbacks.symbolChange=saveLayout;#}
            {#stxx.callbacks.drawing=saveDrawings;#}
            {#stxx.callbacks.newChart=retoggleEvents;#}
            {#stxx.callbacks.preferences=savePreferences;#}

            {#var UIContext;#}

            {#function startUI(){#}
                {#UIContext=new CIQ.UI.Context(stxx, $("cq-context,[cq-context]"));#}
                {#var UILayout=new CIQ.UI.Layout(UIContext);#}
                {#var UIHeadsUpDynamic=new CIQ.UI.HeadsUp($("cq-hu-dynamic"), UIContext, {followMouse:true, autoStart: false});#}
                {#var UIHeadsUpStatic=new CIQ.UI.HeadsUp($("cq-hu-static"), UIContext, {autoStart: true});#}

                {#UIContext.changeSymbol=function(data){#}
                    {#var stx=this.stx;#}
                    {#if(this.loader) this.loader.show();#}
                    {#data.symbol=data.symbol.toUpperCase(); // set a pretty display version#}

                    {#if(stxx.chart.symbol != null)#}
                    {#{#}
                    {#}#}
                    {#// reset comparisons - remove this loop to transfer from symbol to symbol.#}
                    {#for(var field in stx.chart.series) {#}
                        {#// keep studies#}
                        {#if (stxx.chart.series[field].parameters.bucket != "study" ) stx.removeSeries(field);#}
                    {#}#}

                    {#var self=this;#}
                    {#stx.newChart(data, null, null, function(err){#}
                        {#if(err){#}
                            {#//TODO, symbol not found error#}
                            {#if(self.loader) self.loader.hide();#}
                            {#return;#}
                        {#}#}
                        {#// The user has changed the symbol, populate $("cq-chart-title")[0].previousClose with yesterday's closing price#}
                        {#if(stx.tfc) stx.tfc.changeSymbol();   // Update trade from chart#}
                        {#if(self.loader) self.loader.hide();#}
                        {#restoreDrawings(stx, stx.chart.symbol);#}
                        {#console.log("++++++++++++++++++++++++++",old_curr,data.symbol)#}
                        {#if(old_curr != data.symbol && stxx.chart.symbol!= null)#}
                        {#{fillExchange()}// load an initial symbol#}
                        {#//setWS()#}
                    {#});#}
                    {#console.log("OUTTTTT",data.symbol)#}
                    {#//fillExchange()#}
                {#};#}

                {#UIContext.setLookupDriver(new CIQ.UI.Lookup.Driver.ChartIQ());#}
                {#UIContext.UISymbolLookup=$(".ciq-search cq-lookup")[0];#}
                {#var KeystrokeHub=new CIQ.UI.KeystrokeHub($("body"), UIContext, {cb:CIQ.UI.KeystrokeHub.defaultHotKeys});#}
                {#var UIStudyEdit=new CIQ.UI.StudyEdit(null, UIContext);#}
                {#var UIStorage=new CIQ.NameValueStore();#}

                {#var UIThemes=$("cq-themes");#}
                {#UIThemes[0].initialize({#}
                    {#builtInThemes: {"ciq-day":"Day","ciq-night":"Night"},#}
                    {#defaultTheme: "ciq-night",#}
                    {#nameValueStore: UIStorage#}
                {#});#}

                {#var sidePanel=$("cq-side-panel")[0];#}
                {#if(sidePanel) sidePanel.registerCallback(resizeScreen);#}

                {#$(".ciq-sidenav")[0].registerCallback(function (value) {#}
                    {#var stx=this.context.stx, rightPx;#}
                    {#var sidePanelWidth = sidePanel?sidePanel.nonAnimatedWidth():0;#}
                    {#if (value === 'sidenavOn') {#}
                        {#var chartHolderHeight = $('.stx-holder').height();#}
                        {#$('.sidenav').height(chartHolderHeight);#}
                        {#this.node.addClass("active");#}
                        {#stx.layout.sidenav = "sidenavOn";#}
                        {#$('.sidenav').addClass("active");#}
                        {#rightPx=this.node.width()+sidePanelWidth;#}
                    {#} else if (value === 'sidenavOff') {#}
                        {#rightPx=sidePanelWidth;#}
                        {#$('.sidenav').removeClass("active");#}
                        {#this.node.removeClass("active");#}
                        {#stx.layout.sidenav = "sidenavOff";#}
                    {#}#}
                    {#$("cq-side-panel").css("right", rightPx - sidePanelWidth +"px");#}
                    {#$('.ciq-chart-area').css({'right': rightPx +'px'});#}
                    {#$('cq-tradingcentral').css({'margin-right': rightPx + 15 + 'px'});#}
                    {#if(stx.slider) stx.slider.display(stx.layout.rangeSlider);#}
                {#});#}

                {#$(".ciq-HU")[0].registerCallback(function(value){#}
                    {#if(value==="static"){#}
                        {#UIHeadsUpDynamic.end();#}
                        {#UIHeadsUpStatic.begin();#}
                        {#this.node.addClass("active");#}
                    {#}else if(value==="dynamic"){#}
                        {#if(CIQ.isMobile){#}
                            {#// The dynamic headsUp doesn't make any sense on mobile devices so we skip that toggle#}
                            {#// by manually setting the toggle to "static"#}
                            {#this.set("static");#}
                            {#UIHeadsUpDynamic.end();#}
                            {#UIHeadsUpStatic.begin();#}
                            {#this.node.addClass("active");#}
                        {#}else{#}
                            {#UIHeadsUpStatic.end();#}
                            {#UIHeadsUpDynamic.begin();#}
                            {#this.node.addClass("active");#}
                        {#}#}
                    {#}else{#}
                        {#UIHeadsUpStatic.end();#}
                        {#UIHeadsUpDynamic.end();#}
                        {#this.node.removeClass("active");#}
                    {#}#}
                {#});#}
                {#$(".ciq-draw")[0].registerCallback(function(value){#}
                    {#if(value){#}
                        {#this.node.addClass("active");#}
                        {#$("body").addClass("toolbar-on");#}
                    {#}else{#}
                        {#this.node.removeClass("active");#}
                        {#$("body").removeClass("toolbar-on");#}
                    {#}#}
                    {#setHeight();#}
                    {#var stx=this.context.stx;#}
                    {#stx.resizeChart();#}

                    {#// a little code here to remember what the previous drawing tool was#}
                    {#// and to re-enable it when the toolbar is reopened#}
                    {#if(value){#}
                        {#stx.changeVectorType(this.priorVectorType);#}
                    {#}else{#}
                        {#this.priorVectorType=stx.currentVectorParameters.vectorType;#}
                        {#stx.changeVectorType("");#}
                    {#}#}
                {#});#}

                {#if( $('.stx-trade')[0] ) {#}
                    {#$('.stx-trade')[0].registerCallback(function(value) {#}
                        {#var sidePanel=$("cq-side-panel")[0];#}
                        {#if(value){#}
                            {#sidePanel.open({selector:".stx-trade-panel",className:"active"});#}
                            {#this.node.addClass("active");#}
                            {#$(".stx-trade-panel").removeClass("closed");#}
                            {#stxx.layout.sidenav = 'sidenavOff'; // in break-sm hide sidenav when turning on tfc side panel#}
                        {#}else{#}
                            {#sidePanel.close();#}
                            {#this.node.removeClass("active");#}
                            {#$(".stx-trade-panel").addClass("closed");#}
                        {#}#}
                    {#});#}
                {#}#}

                {#if( $('.stx-tradingcentral')[0] ) {#}
                    {#$('.stx-tradingcentral')[0].registerCallback(function(value) {#}
                        {#var tcElement = $('cq-tradingcentral')[0];#}
                        {#if (value) {#}
                            {#tcElement.removeAttribute('disabled');#}
                        {#} else {#}
                            {#tcElement.setAttribute('disabled', 'disabled');#}
                        {#}#}
                    {#});#}
                {#}#}

                {#$("cq-redo")[0].pairUp($("cq-undo"));#}

                {#var params={#}
                    {#excludedStudies: {#}
                        {#"Directional": true,#}
                        {#"Gopala":true,#}
                        {#"vchart":true#}
                    {#},#}
                    {#alwaysDisplayDialog: {"ma":true},#}
                    {#/*dialogBeforeAddingStudy: {"rsi": true} // here's how to always show a dialog before adding the study*/#}
                {#};#}
                {#var UIStudyMenu=new CIQ.UI.StudyMenu($("*[cq-studies]"), UIContext, params);#}
                {#UIStudyMenu.renderMenu();#}

                {#$("cq-views").each(function(){#}
                    {#this.initialize();#}
                {#});#}

                {#if(UIContext.loader) UIContext.loader.show();#}
                {#restorePreferences();#}
                {#restoreLayout(stxx, function(){#}
                    {#if(UIContext.loader) UIContext.loader.hide();#}
                {#});#}

                {#//INITIAL SYMBOL#}
                {#if(!stxx.chart.symbol){#}
                    {#//console.log("if null stxx.chart.symbol",stxx.chart.symbol)#}
                    {#initialSymbol()#}
                {#}#}
                {#CIQ.UI.begin();#}
                {#//CIQ.I18N.setLanguage(stxx, "zh");	// Optionally set a language for the UI, after it has been initialized, and translate.#}
            {#}#}

            {#function hideMarkers(){#}
                {#CIQ.Marker.removeByLabel(stxx, "circle");#}
                {#CIQ.Marker.removeByLabel(stxx, "square");#}
                {#CIQ.Marker.removeByLabel(stxx, "callout");#}
                {#CIQ.Marker.removeByLabel(stxx, "helicopter");#}
            {#}#}

            {#function showMarkers(standardType){#}
                {#// Remove any existing markers#}
                {#hideMarkers();#}
                {#var l=stxx.masterData.length;#}
                {#// An example of a data array to drive the marker creation#}
                {#var data=[#}
                    {#{x:stxx.masterData[l-5].DT, type:standardType, category:"news", headline:"This is a Marker for a News Item"},#}
                    {#{x:stxx.masterData[l-15].DT, type:standardType, category:"earningsUp", headline:"This is a Marker for Earnings (+)"},#}
                    {#{x:stxx.masterData[l-25].DT, type:standardType, category:"earningsDown", headline:"This is a Marker for Earnings (-)"},#}
                    {#{x:stxx.masterData[l-35].DT, type:standardType, category:"dividend", headline:"This is a Marker for Dividends"},#}
                    {#{x:stxx.masterData[l-45].DT, type:standardType, category:"filing", headline:"This is a Marker for a Filing"},#}
                    {#{x:stxx.masterData[l-55].DT, type:standardType, category:"split", headline:"This is a Marker for a Split"}#}
                {#];#}
                {#var story="Like all ChartIQ markers, the object itself is managed by the chart, so when you scroll the chart the object moves with you. It is also destroyed automatically for you when the symbol is changed.";#}

                {#// Loop through the data and create markers#}
                {#for(var i=0;i<data.length;i++){#}
                    {#var datum=data[i];#}
                    {#datum.story=story;#}
                    {#var params={#}
                        {#stx:stxx,#}
                        {#label:standardType,#}
                        {#xPositioner:"date",#}
                        {#x: datum.x,#}
                        {#//chartContainer: true, // Allow markers to float out of chart. Set css .stx-marker{ z-index:20}#}
                        {#node: new CIQ.Marker.Simple(datum)#}
                    {#};#}
                    {#var marker=new CIQ.Marker(params);#}
                {#}#}
                {#stxx.draw();#}
            {#}#}

            {#function resizeScreen(){#}
                {#if(!UIContext) return;#}
                {#checkWidth();#}
                {#setHeight();#}
                {#var sidePanel=$("cq-side-panel")[0];#}
                {#if(sidePanel){#}
                    {#$('.ciq-chart-area').css({'right': sidePanel.nonAnimatedWidth() +'px'});#}
                    {#$('cq-tradingcentral').css({'margin-right': sidePanel.nonAnimatedWidth() + 15 + 'px'});#}
                {#}#}
                {#stxx.resizeChart();#}
                {#if(stxx.slider) stxx.slider.display(stxx.layout.rangeSlider);#}
            {#}#}

            {#//Range Slider; needs to be created before startUI() is called for custom themes to apply#}
            {#new CIQ.RangeSlider({stx:stxx});#}

            {#var webComponentsSupported = ('registerElement' in document &&#}
                {#'import' in document.createElement('link') &&#}
                {#'content' in document.createElement('template'));#}

            {#if(webComponentsSupported){#}
                {#startUI();#}
                {#resizeScreen();#}
            {#}else{#}
                {#window.addEventListener('WebComponentsReady', function(e) {#}
                    {#startUI();#}
                    {#resizeScreen();#}
                {#});#}
            {#}#}

            {#if(typeof Promise === 'undefined') CIQ.loadScript('js/thirdparty/promise.min.js'); // Necessary for IE and MSFT Edge if you are using sharing (because html2canvas uses promises)#}
            {#$(window).resize(resizeScreen);#}
            {#var currentPrice = {};#}

            {#//	 document.title =   title#}


            {#/***************************************************************************************************************/#}
            {#/***************************************************************************************************************/#}
            {#/***************************************************************************************************************/#}
            {#/***************************************************************************************************************/#}
            {#/***************************************************************************************************************/#}
            {#/***************************************************************************************************************/#}
            {#/******************************************************************************************************************************/#}
            {#function httpGet(theUrl) {#}
                {#var xmlHttp = new XMLHttpRequest();#}
                {#xmlHttp.open("GET", theUrl, false); // false for synchronous request#}
                {#xmlHttp.send(null);#}
                {#return xmlHttp.responseText;#}
            {#}#}

            {#function initialSymbol ()#}
            {#{#}
                {#// var from,to#}
                {#var symbol = "{{ symbol }}"#}
                {#var group = "stock"#}
                {#var get_country = httpGet('https://websocket-stock.herokuapp.com/Getstocks/' + symbol)#}
                {#console.log("symbol",symbol)#}
                {#get_country = JSON.parse(get_country).country#}

                {#//console.log("symbol",symbol,"group",group,"get_country",get_country)#}
                {#var symb = {symbol: symbol, country:get_country, group:group}#}

                {#stxx.newChart(symb, null, null, function(err){#}
                    {#if(err){#}
                        {#//TODO, symbol not found error#}
                        {#if(self.loader) self.loader.hide();#}
                        {#return;#}
                    {#}#}
                {#})#}
                {#CIQ.I18N.setLanguage(stxx, "{{app.request.getLocale()}}");#}
            {#}#}

        {#})(jQuery);#}
    {#</script>#}

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <script src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

{% endblock %}








{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}
{#////////**************************************** old code ************************************////#}

{#{% extends 'base.html.twig' %}#}

 {#{% block description %}#}
     {#<title>{{symbol | split('.')[0]}} Stock Price - {{ name}} Stock Quote - Trading Compare</title>#}
     {#<meta name="description" content="{{ name}} ({{symbol| split('.')[0]}}), stock price, stock quotes and financial overviews from Trading Compare. Follow the {{ symbol| split('.')[0]}} chart in real-time.">#}
 {#{% endblock %}#}

{#{% block body %}#}

    {#{{ include('default/searchbar_chart.html.twig') }}#}
    {#<div id="dvChart_stock" class="my-container  ng-cloak" ng-controller="Chart_stockController" ng-init="init('{{ symbol }}')">#}
        {#<div ng-controller="Chart_stockController ">#}
            {#<section class="table">#}
                {#<div class="chart_search">#}
                    {#<div class="container">#}
                        {#<div class="row">#}
                            {#<input class="search_input" type="text" placeholder="Search Instruments">#}
                        {#</div>#}
                    {#</div>#}
                {#</div>#}
                {#<div class="container padding_non margin_bottom">#}
                    {#<div class="row ">#}

                        {#<div class="col-md-8 col-sm-12 col-xs-12 " style="padding-right: 0px;padding-left: 0px;">#}
                            {#<div class="chart_bitcoin-cont  ">#}
                                {#<div class="bitcoin_text-cont">#}
                                    {#<div class="bitcoin_img-cont">#}
                                        {#<img class="bitcoin_img" ng-src="{[{mystock.img}]}" onerror="this.src='/img/Stock_Logos/stocks.png'";>#}
                                    {#</div>#}
                                    {#<div class="bitcoin_text-cont_left ">#}
                                        {#<h3 class="bitcoin_title text_size">{[{mystock.name}]}<span class="bitcoin_title_right">{[{mystock.symbol}]}</span><span class="bitcoin_title_right-start"><i class="fas fa-star"></i></span></h3>#}
                                        {#<h3 class="bitcoin_many_stock text_size" ng-class="{'negative': mystock.variation == 'down', 'positive':mystock.variation == 'up', 'neutral': mystock.variation == 'none'}">{[{mystock.price}]} {[{mystock.devise}]}#}
                                            {#<span class="statistics_block-text" ng-class="{'negative': mystock.change_pct < 0, 'positive': mystock.change_pct >= 0}">{[{mystock.change_pct}]}%#}
                                                {#<span class="statistics_block_min-text">{[{mystock.point}]}</span>#}
                                                {#<span class="bitcoin_green-text_icon"><i class="fas fa-share"></i></span></span>#}
                                        {#</h3>#}
                                    {#</div>#}
                                    {#<div class="bitcoin_text-cont_right">#}
                                        {#<a class="btcoin_btn btn1" href="http://borthy-carges.com/98dd47bc-5797-47bf-847a-784a2445ee36" target="_blank">TRADE NOW</a>#}
                                    {#</div>#}
                                {#</div>#}
                            {#</div>#}

                            {#<div class="chart_content-text chart_content-text1 box_height_stock2">#}
                                {#<div class="bitcoin_text-cont_left">#}
                                    {#<p class="bitcoin_bottom-text text-price column">#}

                                        {#High: <span class="bitcoin_bottom-text_bold">{[{mystock.day_high}]} {[{mystock.devise}]}</span>#}
                                        {#<br>Low:<span class="bitcoin_bottom-text_bold">{[{mystock.day_low}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Open: <span class="bitcoin_bottom-text_bold">{[{mystock.price_open}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Close: <span class="bitcoin_bottom-text_bold">{[{mystock.close_yesterday}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Year High: <span class="bitcoin_bottom-text_bold">{[{mystock["52_week_high"]}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Year Low: <span class="bitcoin_bottom-text_bold">{[{mystock["52_week_low"]}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Day Change: <span class="bitcoin_bottom-text_bold">{[{mystock.day_change}]} %</span>#}
                                        {#<br> Close Yesterday: <span class="bitcoin_bottom-text_bold">{[{mystock.close_yesterday}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Market Cap: <span class="bitcoin_bottom-text_bold">{[{mystock.market_cap}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Volume: <span class="bitcoin_bottom-text_bold">{[{mystock.volume}]} {[{mystock.devise}]}</span>#}
                                        {#<br> Shares: <span class="bitcoin_bottom-text_bold">{[{mystock.shares}]} {[{mystock.devise}]}</span>#}

                                    {#</p>#}
                                {#</div>#}
                            {#</div>#}
                        {#</div>#}


                        {#<div class="col-md-4 col-sm-6 col-xs-12 col-sm1 ">#}
                            {#<div class="chart_bitcoin-reting chart_bitcoin-reting1 box_height_stock1 " style="    padding-bottom: 0px;    padding-top: 20px;">#}
                                {#<div class="col-md-6 col-sm-6 col-xs-6 ">#}
                                    {#<a class="btcoin_btn sentiments_btn_green" target="_blank">BULLISH</a>#}
                                {#</div>#}
                                {#<div class="col-md-6 col-sm-6 col-xs-6 ">#}
                                    {#<a class="btcoin_btn sentiments_btn_red" target="_blank">BEARISH</a>#}
                                {#</div>#}
                                {#<p#}
                                        {#class="chart_bitcoin-reting_prozent"#}
                                {#>Sentiment: {[{mystock.sentiment }]}% Buying</p>#}
                                {#<div class="chart_bitcoin-reting_progress-bar">#}
                                    {#<div class="reting_progress-bar_click"></div>#}
                                {#</div>#}
                            {#</div>#}
                        {#</div>#}

                        {#<div class="col-md-4 col-sm-6 col-xs-12 col-sm2">#}
                            {#<div class="chart_content-text chart_bitcoin-reting box_height_stock2">#}
                                {#<p class="chart_content-text_info">#}
                                    {#{[{mystock.name}]} - {{ symbol| split('.')[0]}}<br><br>#}
                                    {#{[{description}]}#}
                                {#</p>#}
                            {#</div>#}
                        {#</div>#}
                    {#</div>#}
                {#</div>#}

                {#<div class="container padding_non">#}
                    {#<div class="row">#}
                        {#<div class="general-chart">#}
                            {#<img class="general-chart_img" src='{{asset("img/chart.png")}}' alt="chart">#}
                        {#</div>#}
                    {#</div>#}
                {#</div>#}

            {#</section>#}

        {#</div>#}

    {#</div>#}
{#{% endblock %}#}
{#{% block javascripts %}#}
    {#{{ parent() }}#}
    {#<script src="{{ asset('js/Chart_stock.js') }}"></script>#}
    {#<script>#}
        {#function loadCSS(hf) {#}
            {#var ms = document.createElement("link");#}
            {#ms.rel = "stylesheet";#}
            {#ms.href = hf;#}
            {#document.getElementsByTagName("head")[0].appendChild(ms);#}
        {#}#}

        {#loadCSS('{{asset("css/charts.css" )}}');#}
        {#loadCSS('{{asset("css/comment.css" )}}');#}

    {#</script>#}
{#{% endblock %}#}














